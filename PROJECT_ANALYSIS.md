# dskit-swiftui: Project Analysis

## 1) Purpose & Responsibilities

### DSKit (Swift Package / Framework)
- Purpose: Design system library for SwiftUI (iOS 15+), providing components, modifiers, layouts, and appearance theming.
- Responsibilities:
  - Centralize UI styles and tokens (colors, spacing, typography, appearances).
  - Provide reusable SwiftUI views/modifiers used by apps (including MNews).

### DSKitExplorer (Demo app)
- Purpose: Interactive catalog of DSKit screens and components.
- Responsibilities:
  - Showcase screens and appearances.
  - Provide a stable surface for snapshot testing.

## 2) High-Level Architecture & Main Components

- Package root: `Package.swift` defines the `DSKit` library with `SDWebImageSwiftUI` dependency.
- Core source layout under `DSKit/Sources/DSKit/`:
  - `Views/`: DSKit UI components.
  - `Modifiers/`: DSKit view modifiers.
  - `Appearances/`: Theme and style definitions.
  - `Designable/`, `Fonts/`, `Helpers/`: Supporting abstractions.
- Demo app: `DSKitExplorer/` uses `ScreenKey` + `ScreenView` to navigate a catalog of screens.
- Screenshot mode: `DSKitExplorerApp` reads the `screenshot` environment variable to open a specific screen for rendering.

## 3) Relationship to imodeveloperlab

- The workspace in `imodeveloperlab/Workspace.xcworkspace` references `DSKitExplorer.xcodeproj`.
- MNews embeds `DSKit.framework` built by this project when using the workspace.
- Changes in DSKit can affect MNews UI and should be validated in the shared workspace.

## 4) Repository Structure & Tooling

### Top-level
- `DSKit/`: Swift package source.
- `DSKitExplorer/`: demo app sources and assets.
- `DSKitTests/`: snapshot tests for DSKit components.
- `DSKitExplorerTests/`: snapshot tests for demo screens.
- `Content/`: docs and images referenced by README.
- `Scripts/`: helper scripts (docs generation).
- `.github/workflows/` and `.circleci/`: CI configs.

### Schemes & Targets
- `DSKitExplorer` (app).
- `DSKit` (framework target inside the Xcode project).
- `DSKitExplorerTests` (unit/snapshot tests).
- `DSKitTests` (unit/snapshot tests).

### Tests
- Snapshot tests use Point-Free `SnapshotTesting` with goldens in `__Snapshots__`.
- `DSKitExplorerTests/DSKitExplorer.xctestplan` defines test targets and CLI arguments.

### Build & Run
- Open `DSKitExplorer.xcodeproj` or the workspace that includes it.
- CLI build example in `dskit-swiftui/AGENTS.md`.

### CI / Automation
- GitHub Actions workflows call `fastlane` (but no `fastlane/` directory exists in this repo).
- CircleCI config also expects `fastlane` + `scan`.
- `Scripts/documentation_generator.sh` extracts component docs into `Content/Views.md` based on DSKit view files and snapshots.

## 5) README & Existing Docs Review

- `README.md` describes DSKit usage and SPM integration, but omits:
  - How to build/run DSKitExplorer locally.
  - How to run snapshot tests.
  - How the workspace in `imodeveloperlab` consumes DSKit.
- `Content/*.md` are component docs generated by the script; these rely on snapshots.

## 6) Known Assumptions / Tribal Knowledge

- Snapshot tests depend on deterministic rendering and existing images in `__Snapshots__`.
- The documentation generator expects `DSKitTests/__Snapshots__/DSKitTests/*.png` to exist.
- CI references fastlane lanes that are not visible in this repo (may be external or missing).
